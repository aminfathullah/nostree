---
export const prerender = false;

/**
 * Dynamic route for custom tree URLs
 * Handles: /u/username, /u/username/treename
 *
 * URL examples:
 * - /u/maja → default tree via NIP-05 (maja@nostree.me)
 * - /u/maja/portfolio → specific tree
 * - /u/npub1.../music → direct npub lookup
 */

import BaseLayout from "../../layouts/BaseLayout.astro";
import { TreeViewer } from "../../components/client/TreeViewer";

const fullPath = Astro.url.pathname;
const path = fullPath.startsWith("/u") ? fullPath.slice(2) : fullPath; // remove /u prefix
---

<BaseLayout title="Loading... - Nostree">
  <div class="h-full w-full">
    <TreeViewer path={path} client:only="react" />
  </div>
</BaseLayout>
